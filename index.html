<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>SHIB Ads WebApp</title><script src="https://telegram.org/js/telegram-web-app.js"></script><style>@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');@import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap');*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Vazirmatn', Arial, Helvetica, sans-serif;overflow:hidden;background:#0d0c1d}.app-screen{position:fixed;inset:0;background:url('img.png') no-repeat center center;background-size:cover;transition:opacity .5s ease-in;display:flex;flex-direction:column;opacity:0;pointer-events:none;z-index:10}.app-screen.visible{opacity:1;pointer-events:auto;z-index:20}.loading-screen{position:fixed;inset:0;background:#0d0c1d;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:9999;transition:opacity .5s ease-out}.loading-screen.hidden{opacity:0;pointer-events:none}.spinner-circle{width:80px;height:80px;border:8px solid rgba(255,255,255,.1);border-top:8px solid #00ffff;border-radius:50%;animation:spin 1.2s cubic-bezier(.5,0,.5,1) infinite;box-shadow:0 0 20px rgba(0,255,255,.6)}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.main-screen{background-color:#f0f0f0}.main-content{flex:1;display:flex;justify-content:center;align-items:center}.user-circle{position:absolute;top:20px;left:20px;width:70px;height:70px;border:2px dashed #ccc;border-radius:50%;display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer;transition:all .3s ease;z-index:100;overflow:hidden}.user-circle:hover{border-color:#4a90e2;background:rgba(74,144,226,.05)}.user-circle img{width:100%;height:100%;object-fit:cover;border-radius:50%;display:none}.user-circle .placeholder{color:#999;font-size:12px;text-align:center}.user-username{position:absolute;top:95px;left:20px;width:70px;font-size:13px;color:#555;white-space:nowrap;text-align:center;overflow:hidden;text-overflow:ellipsis}.user-id{position:absolute;top:115px;left:20px;width:70px;font-size:11px;color:#888;white-space:nowrap;text-align:center;overflow:hidden;text-overflow:ellipsis}.admin-btn{position:absolute;top:140px;left:20px;width:70px;background:#ff2a2a;color:#fff;border:none;padding:3px 0;border-radius:5px;font-size:10px;font-weight:700;cursor:pointer;box-shadow:0 2px 0 #cc2121;transition:all .1s ease;text-align:center;z-index:100;display:none}.admin-btn:active{transform:translateY(1px);box-shadow:0 1px 0 #cc2121}.admin-btn.visible{display:block}.balance{position:absolute;top:20px;right:20px;background:#fff;border:1px solid #ff5a5a;border-radius:12px;padding:8px 12px;font-family:'Courier New',monospace;font-size:16px;color:#ff2a2a;text-shadow:0 0 2px #ffbbbb;letter-spacing:1px;z-index:101;box-shadow:0 4px 6px rgba(0,0,0,.05)}.progress-group-container{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;gap:20px;width:90%;max-width:300px;z-index:102}.daily-progress-container,.spin-progress-container{background:#fff;padding:15px;border-radius:15px;box-shadow:0 4px 15px rgba(0,0,0,.1);text-align:center;border-left:5px solid #4a90e2}.spin-progress-container{border-left:5px solid #ff8c00}.daily-progress-text,.spin-progress-text{font-size:14px;color:#333;margin-bottom:4px;font-weight:700}.daily-progress-bar,.spin-progress-bar{width:100%;height:12px;background:rgba(0,0,0,.1);border-radius:10px;overflow:hidden;margin-top:6px}.daily-progress-fill{height:100%;background:linear-gradient(90deg,#00f2fe,#4facfe);border-radius:10px;width:0%;transition:width .4s ease}.spin-progress-fill{height:100%;background:linear-gradient(90deg,#ff8c00,#ff4500);border-radius:10px;width:0%;transition:width .4s ease}.button-container{position:absolute;bottom:40px;left:50%;transform:translateX(-50%);display:grid;grid-template-columns:repeat(5,1fr);gap:8px;background:rgba(240,240,240,.9);padding:10px 10px;border-radius:20px;box-shadow:0 4px 15px rgba(0,0,0,.1);backdrop-filter:blur(10px);width:95%;max-width:450px}.nav-button{position:relative;background:linear-gradient(145deg,#4a90e2,#357abd);color:#fff;border:none;padding:10px 0;border-radius:10px;font-size:11px;font-weight:700;cursor:pointer;transition:all .1s ease;flex-grow:1;min-width:auto;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 5px 0 #2c5aa0,0 8px 12px rgba(0,0,0,.15);transform:translateY(0);text-align:center;line-height:1}.nav-button:hover{transform:translateY(-1px);box-shadow:0 6px 0 #2c5aa0,0 10px 15px rgba(0,0,0,.2)}.nav-button:active{transform:translateY(2px);box-shadow:0 3px 0 #2c5aa0,0 5px 8px rgba(0,0,0,.15)}.nav-button span{display:block;text-shadow:0 1px 2px rgba(0,0,0,.3)}.nav-button.task-btn{background:linear-gradient(145deg,#ffc107,#ff9800);box-shadow:0 5px 0 #cc9a00,0 8px 12px rgba(0,0,0,.15)}.nav-button.task-btn:hover{box-shadow:0 6px 0 #cc9a00,0 10px 15px rgba(0,0,0,.2)}.nav-button.task-btn:active{box-shadow:0 3px 0 #cc9a00,0 5px 8px rgba(0,0,0,.15)}.nav-button.withdraw-btn-nav{background:linear-gradient(145deg,#ff2a2a,#cc2121);box-shadow:0 5px 0 #991919,0 8px 12px rgba(0,0,0,.15)}.nav-button.withdraw-btn-nav:hover{box-shadow:0 6px 0 #991919,0 10px 15px rgba(0,0,0,.2)}.nav-button.withdraw-btn-nav:active{box-shadow:0 3px 0 #991919,0 5px 8px rgba(0,0,0,.15)}.task-screen{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding-top:50px;padding-bottom:120px;overflow-y:auto;background:#f0f4f8}.task-header{text-align:center;margin-bottom:30px;width:100%;max-width:320px}.task-title{font-family:'Vazirmatn', sans-serif;font-size:28px;color:#2c3e50;font-weight:800;text-shadow:1px 1px 2px rgba(0,0,0,.05)}.task-description{font-size:16px;color:#555;margin-top:5px}.task-card-container{width:90%;max-width:350px;background:linear-gradient(180deg,#fff,#f7f9fc);padding:25px;border-radius:25px;box-shadow:0 10px 30px rgba(0,0,0,.15),inset 0 0 10px rgba(255,255,255,.5);border:2px solid #e0e6ec;margin-bottom:30px;text-align:center;position:relative;overflow:hidden}.task-card-container::before{content:'‚≠ê';position:absolute;top:-10px;right:-10px;font-size:50px;opacity:.1;transform:rotate(15deg)}.task-item{padding:0;border:none;background:transparent;box-shadow:none;margin-bottom:25px;display:block}.task-info h4{color:#3498db;margin-bottom:10px;font-size:22px;font-weight:700}.task-info p{color:#7f8c8d;font-size:15px;margin-bottom:20px;line-height:1.4}.task-reward{font-size:28px;font-weight:800;color:#e67e22;font-family:'Orbitron', sans-serif;padding:12px 20px;background:#fff0e6;border-radius:15px;display:inline-block;margin-bottom:25px;border:1px dashed #e67e22;letter-spacing:1px;box-shadow:0 2px 5px rgba(0,0,0,.1)}.task-action-btn{background:linear-gradient(145deg,#2ecc71,#27ae60);color:#fff;border:none;padding:15px 25px;border-radius:12px;font-size:16px;font-weight:700;cursor:pointer;box-shadow:0 6px 0 #219d55;transition:all .1s ease;text-transform:uppercase;width:100%;font-family:'Vazirmatn', sans-serif;margin-top:15px}.task-action-btn:disabled{background:linear-gradient(145deg,#bdc3c7,#95a5a6);box-shadow:0 6px 0 #7f8c8d;cursor:not-allowed;color:#ecf0f1}.task-action-btn:active{transform:translateY(3px);box-shadow:0 3px 0 #219d55}.task-action-btn.completed{background:linear-gradient(145deg,#95a5a6,#7f8c8d);box-shadow:0 6px 0 #6c7a89;color:#ecf0f1}.task-action-btn.completed:active{transform:translateY(3px);box-shadow:0 3px 0 #6c7a89}.task-screen .note{margin-top:25px;background:#f8f8f8;border-left:5px solid #3498db;padding:15px;border-radius:10px;font-size:14px;color:#555;text-align:left;box-shadow:0 1px 3px rgba(0,0,0,.05)}.task-back-btn{background:linear-gradient(145deg,#6c757d,#5a6268);color:#fff;border:none;padding:12px 30px;border-radius:10px;font-size:15px;font-weight:700;cursor:pointer;box-shadow:0 5px 0 #4e555b;transition:all .1s ease;width:90%;max-width:350px;margin-bottom:20px}.task-back-btn:active{transform:translateY(3px);box-shadow:0 2px 0 #4e555b}.spin-screen{display:flex;flex-direction:column;align-items:center;justify-content:center;transition:opacity .3s ease}#wheelBox{position:relative;margin-bottom:25px}#wheelCanvas{border-radius:50%;box-shadow:0 0 0 10px #eee,0 15px 35px rgba(0,0,0,.4);background-color:#fefefe;border:2px solid #ccc}.arrow{position:absolute;top:-16px;left:50%;transform:translateX(-50%);width:0;height:0;border-left:18px solid transparent;border-right:18px solid transparent;border-top:28px solid #ff3366;filter:drop-shadow(0 3px 2px rgba(0,0,0,.3));z-index:10}.spin-btn{background:#ff3366;color:#fff;border:none;padding:12px 35px;border-radius:30px;font-size:16px;font-weight:700;cursor:pointer;box-shadow:0 6px 0 #cc2950;transition:all .1s ease}.spin-btn:active{transform:translateY(3px);box-shadow:0 3px 0 #cc2950}.spin-result{margin-top:18px;font-size:18px;color:#333}.spin-back{margin-top:25px;background:#6c757d;color:#fff;border:none;padding:10px 25px;border-radius:8px;font-size:15px;font-weight:700;cursor:pointer;box-shadow:0 4px 0 #5a6268}.spin-back:active{transform:translateY(2px);box-shadow:0 2px 0 #5a6268}.withdraw-screen{display:flex;flex-direction:column;align-items:center;padding:20px 20px;transition:opacity .3s ease;overflow-y:auto}.withdraw-header{text-align:center;margin-bottom:25px;width:100%;max-width:400px;background:rgba(255,255,255,.9);padding:15px;border-radius:15px}.withdraw-title{font-size:28px;color:#ff2a2a;font-weight:700;text-shadow:0 1px 1px rgba(0,0,0,.1)}.current-balance-info{font-size:16px;color:#555;margin-top:10px;font-weight:700}.input-form-container{width:100%;max-width:400px;background:#fff;padding:25px;border-radius:15px;box-shadow:0 6px 20px rgba(0,0,0,.1);border:1px solid #ddd;margin-bottom:20px}.input-group{width:100%;margin-bottom:15px}.input-group label{display:block;margin-bottom:8px;font-size:14px;color:#555;font-weight:600}.input-group input{width:100%;padding:12px 15px;border:1px solid #ddd;border-radius:10px;font-size:16px;transition:border-color .3s ease,box-shadow .3s ease;outline:none}.input-group input:focus{border-color:#ff8c00;box-shadow:0 0 0 3px rgba(255,140,0,.2)}.withdraw-buttons{display:flex;gap:15px;margin-top:20px;justify-content:center}.withdraw-btn{background:linear-gradient(145deg,#28a745,#1e7e34);color:#fff;border:none;padding:12px 30px;border-radius:10px;font-size:16px;font-weight:700;cursor:pointer;box-shadow:0 5px 0 #1c6d32;transition:all .1s ease;width:100%}.withdraw-btn:active{transform:translateY(3px);box-shadow:0 2px 0 #1c6d32}.back-btn{background:linear-gradient(145deg,#6c757d,#5a6268);color:#fff;border:none;padding:12px 30px;border-radius:10px;font-size:16px;font-weight:700;cursor:pointer;box-shadow:0 5px 0 #4e555b;transition:all .1s ease}.back-btn:active{transform:translateY(3px);box-shadow:0 2px 0 #4e555b}.note{margin-top:15px;font-size:13px;color:#777;max-width:400px;text-align:center;background:rgba(255,140,0,.1);padding:10px;border-radius:10px;border-left:5px solid #ff8c00}.history-section{width:100%;max-width:400px;margin-top:30px;padding:20px 0;border-top:1px solid #eee;background:rgba(255,255,255,.9);padding:15px;border-radius:15px}.history-title{font-size:20px;color:#333;margin-bottom:15px;font-weight:700;text-align:center}.history-table{width:100%;border-collapse:collapse;font-size:14px}.history-table th,.history-table td{padding:10px;border-bottom:1px solid #eee;text-align:left}.history-table th{background-color:#f0f4f8;color:#4a90e2;font-weight:700}.history-table tr:last-child td{border-bottom:none}.status-pending{color:#ff8c00;font-weight:700}.status-completed{color:#28a745;font-weight:700}.no-records{text-align:center;color:#999;padding:20px}.invite-screen{display:flex;flex-direction:column;align-items:center;padding:20px 20px;transition:opacity .3s ease;overflow-y:auto}.invite-header{text-align:center;margin-bottom:25px;width:100%;max-width:400px;background:rgba(255,255,255,.9);padding:15px;border-radius:15px}.invite-title{font-size:28px;color:#4a90e2;font-weight:700;text-shadow:0 1px 1px rgba(0,0,0,.1)}.referrals-count-info{font-size:18px;color:#333;margin-top:15px;font-weight:700;padding:10px 15px;background:#e6f0ff;border-radius:10px;border:1px solid #cce0ff;box-shadow:0 2px 5px rgba(0,0,0,.05);width:100%}.invite-buttons{width:100%;margin-top:15px}.copy-link-btn{background:linear-gradient(145deg,#00bfff,#0077b3);color:#fff;border:none;padding:12px 30px;border-radius:10px;font-size:16px;font-weight:700;cursor:pointer;box-shadow:0 5px 0 #005a8d;transition:all .1s ease;width:100%}.copy-link-btn:active{transform:translateY(3px);box-shadow:0 2px 0 #005a8d}#referralLinkInput{text-align:center;cursor:pointer;font-weight:500;color:#4a90e2;background:#f8f8f8;word-break:break-all;white-space:normal}.custom-alert-overlay{position:fixed;inset:0;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center;z-index:99999;opacity:0;transition:opacity .3s ease}.custom-alert-overlay.visible{display:flex;opacity:1}.custom-alert-box{width:90%;max-width:280px;background:#ffffed;border-radius:15px;padding:20px;text-align:center;box-shadow:0 8px 15px rgba(0,0,0,.3),inset 0 0 10px rgba(0,0,0,.05);border:3px solid #6b4d32;transform:perspective(600px) rotateX(0deg) scale(.9);transition:transform .3s cubic-bezier(.175,.885,.32,1.275)}.custom-alert-overlay.visible .custom-alert-box{transform:perspective(600px) rotateX(0deg) scale(1)}.alert-title{font-family:'Vazirmatn', sans-serif;font-size:20px;font-weight:700;color:#4caf50;margin-bottom:8px;text-shadow:1px 1px 0 rgba(0,0,0,.1);letter-spacing:.5px}.alert-message{font-family:'Vazirmatn', sans-serif;font-size:13px;color:#333;margin-bottom:18px;white-space:pre-wrap}.alert-icon{font-size:35px;margin-bottom:12px}.alert-icon::before{content:'‚≠ê'}.alert-close-btn{background:#6b4d32;color:#fff;border:none;padding:9px 18px;border-radius:8px;font-size:15px;font-weight:700;cursor:pointer;box-shadow:0 4px 0 #543b27;transition:all .1s ease}.alert-close-btn:active{transform:translateY(2px);box-shadow:0 2px 0 #543b27}.custom-alert-box.success .alert-title{color:#28a745}.custom-alert-box.success .alert-icon::before{content:'üéÆ'}.custom-alert-box.error .alert-title{color:#dc3545}.custom-alert-box.error .alert-icon::before{content:'ü§¶'}.custom-alert-box.warning .alert-title{color:#ffc107}.custom-alert-box.warning .alert-icon::before{content:'‚ö†Ô∏è'}.admin-screen{display:flex;flex-direction:column;align-items:center;padding:20px;overflow-y:auto;background:#e6e6fa}.admin-header{width:100%;max-width:600px;text-align:center;margin-bottom:20px;background:#fff;padding:15px;border-radius:15px;box-shadow:0 4px 10px rgba(0,0,0,.1)}.admin-title{font-size:24px;color:#8a2be2;font-weight:700}.admin-subtitle{font-size:16px;color:#555;margin-top:5px}.admin-content{width:100%;max-width:600px;background:#fff;padding:20px;border-radius:15px;box-shadow:0 4px 10px rgba(0,0,0,.1)}.admin-list-item{display:flex;justify-content:space-between;align-items:center;padding:10px;border-bottom:1px solid #eee}.admin-list-item:last-child{border-bottom:none}.user-info-admin{flex-grow:1;text-align:left}.user-info-admin h4{margin:0;font-size:16px;color:#333}.user-info-admin p{margin:0;font-size:12px;color:#777}.admin-actions{display:flex;gap:5px}.action-btn{padding:5px 10px;border-radius:5px;font-size:12px;font-weight:700;cursor:pointer;transition:background-color .1s ease}.accept-btn{background:#28a745;color:#fff;border:none}.reject-btn{background:#dc3545;color:#fff;border:none}.ban-btn{background:#ffc107;color:#333;border:none}.no-requests{text-align:center;color:#999;padding:20px}</style></head><body><div class="loading-screen" id="loadingScreen"><div class="spinner-circle"></div></div><div class="app-screen main-screen" id="mainScreen"><div class="balance" id="shibBalance">0 SHIB</div><div class="progress-group-container"><div class="daily-progress-container"><div class="daily-progress-text">Ads today: <span id="adsCount">0</span> / 100</div><div class="daily-progress-bar"><div class="daily-progress-fill" id="dailyProgressFill"></div></div></div><div class="spin-progress-container"><div class="spin-progress-text">Spins today: <span id="spinsCount">0</span> / 15</div><div class="spin-progress-bar"><div class="spin-progress-fill" id="spinProgressFill"></div></div></div></div><div class="user-circle" onclick="circleClick()"><img id="userImage" src="" alt="User"><div class="placeholder">+</div></div><div class="user-username" id="userName"></div><div class="user-id" id="userId"></div><button class="admin-btn" id="adminBtn" onclick="showAdminPanel()">Admin</button><div class="main-content"></div><div class="button-container"><button class="nav-button" onclick="watchAds()"><span>Ads</span></button><button class="nav-button task-btn" onclick="showTask()"><span>Task</span></button><button class="nav-button" onclick="showSpin()"><span>Spin</span></button><button class="nav-button withdraw-btn-nav" onclick="showWithdraw()"><span>Withdraw</span></button><button class="nav-button" onclick="inviteFriends()"><span>Invite</span></button></div></div><div class="app-screen task-screen" id="taskScreen"><div class="task-card-container"><div class="task-header"><h2 class="task-title">üî• Daily Bonus & Tasks</h2></div><div class="task-item"><div class="task-info"><h4>Join Telegram Channel & Claim Reward</h4><p>Complete this one-time task to instantly receive a welcome bonus to your balance.</p></div><div class="task-reward">+50 SHIB</div></div><button class="task-action-btn" id="taskActionBtn" onclick="handleTaskAction()"><span>Join & Claim Reward</span></button><div class="note">üí° **Note:** Click the button to join the channel. Wait 5 seconds after joining, then click the button again to **'Claim Reward'**.</div></div><button class="task-back-btn" onclick="hideTask()">Back to Main</button></div><div class="app-screen spin-screen" id="spinScreen"><div id="wheelBox"><div class="arrow"></div><canvas id="wheelCanvas" width="280" height="280"></canvas></div><button class="spin-btn" id="spinBtn" onclick="startSpin()">SPIN</button><div class="spin-result" id="spinResult"></div><button class="spin-back" onclick="hideSpin()">Back</button></div><div class="app-screen withdraw-screen" id="withdrawScreen"><div class="withdraw-header"><h2 class="withdraw-title">üí∞ Request SHIB Withdrawal</h2><div class="current-balance-info">Your Balance: <span id="withdrawBalanceDisplay">0 SHIB</span></div></div><div class="input-form-container"><div class="input-group"><label>Binance User ID</label><input type="text" id="binanceId" placeholder="Enter your Binance ID"></div><div class="input-group"><label>Amount in SHIB (Min 400)</label><input type="number" id="withdrawAmount" min="400" value="" placeholder=""></div><div class="withdraw-buttons"><button class="withdraw-btn" onclick="confirmWithdraw()">Send Request</button></div></div><div class="note">‚ö†Ô∏è **Important:** The withdrawal will be processed manually within **24 hours**. Ensure your Binance ID is correct.</div><div class="history-section"><h3 class="history-title">Withdrawal History</h3><div id="withdrawalHistoryContainer"></div></div><button class="back-btn" onclick="hideWithdraw()">Back to Main</button></div><div class="app-screen invite-screen" id="inviteScreen"><div class="invite-header"><h2 class="invite-title">ü§ù Invite Friends & Earn SHIB</h2><div class="referrals-count-info">Your Referrals: <span id="referralsCountDisplay">0</span></div></div><div class="input-form-container"><div class="input-group"><label>Your Referral Link</label><input type="text" id="referralLinkInput" readonly value="Generating Link..."></div><div class="invite-buttons"><button class="copy-link-btn" onclick="copyReferralLink()">Copy Link</button></div></div><div class="note">üöÄ Share this link to invite new users. You will earn 5% of the revenue from every referral you bring through ads!</div><button class="back-btn" onclick="hideInvite()">Back to Main</button></div><div class="app-screen admin-screen" id="adminScreen"><div class="admin-header"><h2 class="admin-title">üëë Admin Panel</h2><div class="admin-subtitle">Pending Withdrawal Requests</div></div><div class="admin-content"><div id="pendingWithdrawalsList"></div></div><button class="back-btn" onclick="hideAdminPanel()">Back to Main</button></div><div id="customAlert" class="custom-alert-overlay"><div class="custom-alert-box"><div class="alert-icon" id="alertIcon"></div><div class="alert-title" id="alertTitle"></div><div class="alert-message" id="alertMessage"></div><button class="alert-close-btn" onclick="document.getElementById('customAlert').classList.remove('visible')">OK</button></div></div><audio id="backgroundAudio" loop><source src="audio.mp3" type="audio/mp3"></audio><audio id="successSFX"><source src="success.mp3" type="audio/mp3"></audio><audio id="errorSFX"><source src="error.mp3" type="audio/mp3"></audio><script src='//libtl.com/sdk.js' data-zone='10245709' data-sdk='show_10245709'></script><script>const loadingScreen=document.getElementById('loadingScreen'),mainScreen=document.getElementById('mainScreen');document.addEventListener('DOMContentLoaded',()=>{setTimeout(()=>{loadingScreen.classList.add('hidden'),initDailyProgress(),playBGAudio()},1500)});const backgroundAudio=document.getElementById('backgroundAudio'),successSFX=document.getElementById('successSFX'),errorSFX=document.getElementById('errorSFX'),customAlert=document.getElementById('customAlert'),alertBox=customAlert.querySelector('.custom-alert-box'),alertTitleEl=document.getElementById('alertTitle'),alertMessageEl=document.getElementById('alertMessage'),alertIconEl=document.getElementById('alertIcon');function playBGAudio(){backgroundAudio.paused&&(backgroundAudio.volume=.4,backgroundAudio.play().catch(e=>console.log("Background audio play failed, waiting for user click:",e)))}function playSFX(e){let t;if("success"===e)t=successSFX;else{if("error"!==e)return;t=errorSFX}t.currentTime=0,t.volume=.8,t.play().catch(e=>console.log("SFX play failed:",e))}function showCustomAlert(e,t,s="warning"){const a=e,n=t.replace(/(\r\n|\n|\r)/gm,"\n");alertTitleEl.textContent=a,alertMessageEl.textContent=n,alertBox.classList.remove("success","error","warning"),alertBox.classList.add(s),customAlert.classList.add("visible"),playSFX("error"===s?"error":"success")}Telegram.WebApp.ready();let tgUser=null;if(Telegram.WebApp.initDataUnsafe&&Telegram.WebApp.initDataUnsafe.user){tgUser=Telegram.WebApp.initDataUnsafe.user;const e=tgUser.photo_url,t=tgUser.first_name+(tgUser.last_name?" "+tgUser.last_name:""),s=tgUser.id,a=document.getElementById('userImage'),n=document.getElementById('userName'),i=document.getElementById('userId'),r=document.querySelector('.placeholder');e?(a.src=e,a.style.display='block',r.style.display='none'):i.style.top='105px',n.textContent=t,i.textContent='ID: '+s}function getRefParam(){let e=null;const t="ref_";if(Telegram.WebApp.initDataUnsafe&&Telegram.WebApp.initDataUnsafe.start_param){const s=Telegram.WebApp.initDataUnsafe.start_param;s.startsWith(t)&&(e=s.substring(t.length),console.log("Referrer ID from start_param:",e))}return e}let referrerId=getRefParam();const API_URL='/api';async function fetchApi(e){if(!tgUser)return showCustomAlert('Critical Error!','User data not initialized. Please restart the app. [CODE: U_NIL]','error'),{ok:!1,error:'User not initialized'};const t=Telegram.WebApp.initData;if(!t)return showCustomAlert('Critical Error!','Initialization data is missing. Please restart the app. [CODE: ID_MS]','error'),{ok:!1,error:'InitData missing'};"function"==typeof Telegram.WebApp.showProgress&&Telegram.WebApp.showProgress();try{const s=await fetch(API_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({...e,user_id:tgUser.id,initData:t})});"function"==typeof Telegram.WebApp.hideProgress&&Telegram.WebApp.hideProgress();const a=await s.json();if(!s.ok||!a.ok){const t=a.error||`Server Error: ${s.status} ${s.statusText}`;let n='Operation Failed!',i='error',r=t;return 429===s.status?(n='Rate Limit Exceeded!',i='warning',r='You have exceeded the allowed request limit. Please try again later.'):t.includes('banned')?(n='Access Denied!',i='error',r='This account has been banned.'):t.includes('limit reached')?(n='Daily Limit Reached!',i='warning',r='You have reached the maximum number of allowed actions for today.'):t.includes('Server Token')||409===s.status||408===s.status?(n='Security Error!',i='error',r='A security-related error occurred. Please try again.'):'completeTask'===e.type&&t.includes('already completed')?(n='Task Completed!',i='warning',r='You have already completed this task and received the reward.'):'completeTask'===e.type&&t.includes('not joined')?(n='Task Failed!',i='error',r='You must join the channel first to claim the reward.'):(n='Operation Failed!',i='error',r=t),showCustomAlert(n,r,i),{ok:!1,error:t}}return a}catch(e){return"function"==typeof Telegram.WebApp.hideProgress&&Telegram.WebApp.hideProgress(),console.error(`General Fetch Error for type ${e.type}:`,e.message),showCustomAlert('Connection Error!','Could not connect to the server. Please check your internet connection.','error'),{ok:!1,error:e.message}}}async function requestActionId(e){const t=await fetchApi({type:'generateActionId',action_type:e});return t.ok?t.data.action_id:null}const DAILY_MAX=100,DAILY_MAX_SPINS=15;let shibBalance=0,adsWatchedToday=0,spinsToday=0,taskCompleted=!1,taskActionState='JOIN_OR_CLAIM',withdrawalHistory=[],referralsCount=0,isBanned=!1,isProcessingTask=!1,sectors=[5,10,15,20,5],isAdmin=!1,adminUserId='7741750541';function updateState(e){shibBalance=void 0!==e.balance?e.balance:shibBalance,adsWatchedToday=void 0!==e.ads_watched_today?e.ads_watched_today:adsWatchedToday,spinsToday=void 0!==e.spins_today?e.spins_today:spinsToday,referralsCount=void 0!==e.referrals_count?e.referrals_count:referralsCount,withdrawalHistory=void 0!==e.withdrawal_history?e.withdrawal_history:withdrawalHistory,isBanned=void 0!==e.is_banned?e.is_banned:isBanned,void 0!==e.task_completed&&(taskCompleted=e.task_completed,taskActionState=e.task_completed?'COMPLETED':taskActionState),isAdmin=void 0!==e.is_admin?e.is_admin:isAdmin,updateUI()}async function loadUserData(){if(!tgUser)return;const e=await fetchApi({type:'getUserData'});e.ok&&(e.data.is_banned?(isBanned=!0,mainScreen.classList.remove('visible'),showCustomAlert('Account Banned!','This account has been permanently restricted for violating policies. Access to the Mini App is denied.','error')):(updateState({balance:e.data.balance,ads_watched_today:e.data.ads_watched_today,spins_today:e.data.spins_today,referrals_count:e.data.referrals_count,is_banned:!1,task_completed:e.data.task_completed||!1,is_admin:e.data.is_admin||!1,withdrawal_history:(e.data.withdrawal_history||[]).map(e=>({amount:e.amount,status:e.status,date:new Date(e.created_at).toLocaleDateString('en-GB')}))}),taskCompleted?taskActionState='COMPLETED':taskActionState='JOIN_OR_CLAIM',mainScreen.classList.add('visible')))}async function initDailyProgress(){if(!tgUser)return;const e=await fetchApi({type:'register',ref_by:referrerId||null});e.ok&&await loadUserData()}function updateUI(){document.getElementById('shibBalance').textContent=shibBalance.toLocaleString()+' SHIB',document.getElementById('withdrawBalanceDisplay').textContent=shibBalance.toLocaleString()+' SHIB',document.getElementById('adsCount').textContent=adsWatchedToday;const e=Math.min(adsWatchedToday/DAILY_MAX*100,100);document.getElementById('dailyProgressFill').style.width=e+'%',document.getElementById('spinsCount').textContent=spinsToday;const t=Math.min(spinsToday/DAILY_MAX_SPINS*100,100);document.getElementById('spinProgressFill').style.width=t+'%',document.getElementById('referralsCountDisplay').textContent=referralsCount.toLocaleString();const s=document.getElementById('taskActionBtn');if(s){if(taskCompleted)s.disabled=!0,s.textContent='Task Completed (50 SHIB Claimed)',s.classList.remove('task-action-btn'),s.classList.add('completed');else{s.disabled=isProcessingTask,s.textContent=isProcessingTask?'Processing...':'CLAIM'===taskActionState?'Click HERE to Claim Reward':'Join & Claim Reward',s.classList.remove('completed'),s.classList.add('task-action-btn')}}const a=document.querySelector('button[onclick="watchAds()"]');if(a){if(isBanned||adsWatchedToday>=DAILY_MAX)a.disabled=!0,a.querySelector('span').textContent='LIMIT REACHED';else a.disabled=!1,a.querySelector('span').textContent='Ads'}const n=document.getElementById('spinBtn');if(n){if(isBanned||spinsToday>=DAILY_MAX_SPINS)n.disabled=!0,n.textContent=`LIMIT REACHED (${spinsToday}/${DAILY_MAX_SPINS})`;else if(!spinning)n.disabled=!1,n.textContent='SPIN'}const i=document.getElementById('adminBtn');if(i)tgUser&&tgUser.id.toString()===adminUserId?i.classList.add('visible'):i.classList.remove('visible')}async function watchAds(){if(isBanned)return showCustomAlert('Access Denied!','This account has been banned.','error');if(adsWatchedToday>=DAILY_MAX)return showCustomAlert('Daily Limit Reached!',`Ôº°Ôº¨Ôº¨ ÔΩÅÔΩÑÔΩì Ôº§ÔΩèÔΩéÔΩÖ (${DAILY_MAX}). Ôº£ÔΩèÔΩçÔΩÖ ÔΩÇÔΩÅÔΩÉÔΩã Ôº°ÔΩÜÔΩîÔΩÖÔΩí 6 Ôº®ÔΩèÔΩïÔΩíÔΩìü•©!`,'warning');const e=await requestActionId('watchAd');if(!e)return;show_10245709().then(()=>show_10245709()).then(async()=>{const t=await fetchApi({type:'watchAd',action_id:e});if(t.ok){const e=t.data.actual_reward;updateState({balance:t.data.new_balance,ads_watched_today:t.data.new_ads_count}),referrerId&&fetchApi({type:'commission',referrer_id:referrerId,referee_id:tgUser.id}).then(e=>{e.ok?console.log('Commission sent successfully.'):console.warn('Commission failed to send:',e.error)});let s='Reward Granted!',a='success',n=` ÔºπÔºØÔºµ Ôº∑Ôº©ÔºÆ ${e} SHIB.`;t.data.new_ads_count>=DAILY_MAX&&(s='Daily Task Completed!',n=`Congratulations! You have completed all today's ads (${DAILY_MAX}). Ôº£ÔºØÔº≠Ôº• ÔΩÇÔΩÅÔΩÉÔΩã ÔΩÅÔΩÜÔΩîÔΩÖÔΩí 6 Ôº®ÔΩèÔΩïÔΩíÔΩì!`),showCustomAlert(s,n,a)}}).catch(e=>{console.error("libtl.com Ad sequence failed:",e),"string"==typeof e&&e.includes('canceled')?showCustomAlert('Ad Cancelled/Failed!','The ad sequence was interrupted. Please watch both ads completely to receive the reward.','warning'):showCustomAlert('Ad Load Failed!','One of the ads failed to load. Please try again.','error')})}function circleClick(){console.log('Circle clicked')}function showTask(){if(isBanned)return showCustomAlert('Access Denied!','This account has been banned.','error');mainScreen.classList.remove('visible'),document.getElementById('taskScreen').classList.add('visible'),loadUserData()}function hideTask(){document.getElementById('taskScreen').classList.remove('visible'),mainScreen.classList.add('visible')}async function claimTaskReward(){if(isBanned)return showCustomAlert('Access Denied!','This account has been banned.','error');if(isProcessingTask)return;isProcessingTask=!0,updateUI();let e=5;const t=setInterval(()=>{e--,e>=0?showCustomAlert('Processing Reward...',`Waiting ${e} seconds to verify channel membership. Please do not close the app.`,'warning'):clearInterval(t)},1e3);await new Promise(e=>setTimeout(e,5e3)),clearInterval(t),showCustomAlert('Verifying...','Contacting server to confirm membership and claim reward.','warning');const s=await requestActionId('completeTask');if(!s)return isProcessingTask=!1,taskActionState='JOIN_OR_CLAIM',void updateUI();const a=await fetchApi({type:'completeTask',action_id:s});isProcessingTask=!1,a.ok?(updateState({balance:a.data.new_balance,task_completed:!0}),taskActionState='COMPLETED',showCustomAlert('Reward Claimed!','You received 50 SHIB for joining the channel!','success')):(loadUserData(),taskActionState='JOIN_OR_CLAIM'),updateUI()}function handleTaskAction(){if(taskCompleted)return showCustomAlert('Task Completed!','You have already completed this task and received the reward.','warning');if(isProcessingTask)return;const e='https://t.me/botbababab';'JOIN_OR_CLAIM'===taskActionState?("function"==typeof Telegram.WebApp.openTelegramLink?Telegram.WebApp.openTelegramLink(e):window.open(e,'_blank'),taskActionState='CLAIM',updateUI(),showCustomAlert('Please Join Channel','You must join the channel first. Click the button again (after 5 seconds) to claim your reward.','warning')):'CLAIM'===taskActionState&&claimTaskReward()}function inviteFriends(){if(isBanned)return showCustomAlert('Access Denied!','This account has been banned.','error');mainScreen.classList.remove('visible'),document.getElementById('inviteScreen').classList.add('visible'),generateReferralLink(),loadUserData()}function hideInvite(){document.getElementById('inviteScreen').classList.remove('visible'),mainScreen.classList.add('visible')}function generateReferralLink(){const e=document.getElementById('referralLinkInput');if(!tgUser)return void(e.value='User data not available.');const t=tgUser.id,s="Bot_ad_watchbot/earn",a=`https://t.me/${s}?startapp=ref_${t}`;e.value=a}function copyReferralLink(){const e=document.getElementById('referralLinkInput').value;if('User data not available.'===e||'Generating Link...'===e)return showCustomAlert('Error!','The referral link is not ready yet. Please wait a moment.','warning');navigator.clipboard.writeText(e).then(()=>{Telegram.WebApp.HapticFeedback.notificationOccurred('success'),showCustomAlert('Link Copied!','The referral link has been copied to the clipboard.','success')}).catch(e=>{console.error('Failed to copy text: ',e),showCustomAlert('Copy Failed!','Failed to copy the link. Please try again.','error')})}const colors=['#00bfff','#ff8c00','#28a745','#ff4500','#00f2fe'],prizeValues=sectors,canvas=document.getElementById('wheelCanvas'),ctx=canvas.getContext('2d'),spinResult=document.getElementById('spinResult'),spinBtn=document.getElementById('spinBtn');let spinning=!1,currentAngle=0;function drawWheel(){const e=canvas.width/2,t=canvas.height/2,s=130,a=sectors.length,n=2*Math.PI/a;ctx.clearRect(0,0,canvas.width,canvas.height),ctx.font='24px Vazirmatn, sans-serif',ctx.textAlign='center',ctx.textBaseline='middle',sectors.forEach((i,r)=>{const l=r*n-Math.PI/2,c=l+n;ctx.beginPath(),ctx.fillStyle=colors[r%colors.length],ctx.moveTo(e,t),ctx.arc(e,t,s,l,c),ctx.closePath(),ctx.fill(),ctx.beginPath(),ctx.strokeStyle='#fff',ctx.lineWidth=3,ctx.moveTo(e,t),ctx.arc(e,t,s,l,c),ctx.closePath(),ctx.stroke();const o=l+n/2,d=e+s*.65*Math.cos(o),u=t+s*.65*Math.sin(o);ctx.save(),ctx.translate(d,u),ctx.rotate(o+Math.PI/2),ctx.fillStyle='#000',ctx.fillText('üê±',0,0),ctx.restore()}),ctx.beginPath(),ctx.fillStyle='#fff',ctx.arc(e,t,20,0,2*Math.PI),ctx.fill(),ctx.strokeStyle='#ff3366',ctx.lineWidth=4,ctx.stroke(),ctx.beginPath(),ctx.fillStyle='#ff3366',ctx.arc(e,t,8,0,2*Math.PI),ctx.fill(),ctx.shadowColor='transparent'}drawWheel();async function startSpin(){if(spinning)return;if(isBanned)return showCustomAlert('Access Denied!','This account has been banned.','error');if(spinsToday>=DAILY_MAX_SPINS)return;const e=await requestActionId('preSpin');if(!e)return;const t=await fetchApi({type:'preSpin',action_id:e});if(!t.ok)return void await loadUserData();const s=await requestActionId('spinResult');if(!s)return showCustomAlert('Security Error!','Failed to get confirmation token. Please try again.','error'),void await loadUserData();show_10245709().then(async()=>{spinning=!0,spinBtn.disabled=!0,spinResult.textContent='Spinning...';const e=await fetchApi({type:'spinResult',action_id:s});if(e.ok){const t=e.data.actual_prize,s=void 0!==e.data.prize_index?e.data.prize_index:0,a=sectors.length,n=2*Math.PI/a;let i=Math.PI/2- (s*n+n/2);i=i+5*2*Math.PI,currentAngle+=i,canvas.style.transition='transform 4s cubic-bezier(0.22,0,0.2,1)',canvas.style.transform=`rotate(${currentAngle}rad)`,setTimeout(async()=>{canvas.style.transition='none',updateState({balance:e.data.new_balance,spins_today:e.data.new_spins_count}),spinResult.textContent=`üéâ\n\nYou won ${t} SHIB!`,showCustomAlert('Congratulations!',`You won ${t} SHIB!`,'success'),await loadUserData()},4e3)}else spinResult.textContent=`‚ùå ERROR ‚ùå\n\n[STATUS] Error receiving prize. Please try again.`,e.error.includes('SECURITY ERROR')||showCustomAlert('Error!','Error receiving prize. Please try again.','error'),await loadUserData();spinning=!1,updateUI()}).catch(e=>{console.error("libtl.com Ad failed to show or was dismissed:",e),"string"==typeof e&&e.includes('canceled')?showCustomAlert('Ad Cancelled/Failed!','The ad was not watched completely. The attempt was not counted.','warning'):showCustomAlert('Ad Load Failed!','Ad failed to load. The attempt was not counted. Please try again.','error'),loadUserData()})}function showSpin(){if(isBanned)return showCustomAlert('Access Denied!','This account has been banned.','error');mainScreen.classList.remove('visible'),document.getElementById('spinScreen').classList.add('visible'),loadUserData(),updateUI()}function hideSpin(){document.getElementById('spinScreen').classList.remove('visible'),mainScreen.classList.add('visible')}function showWithdraw(){if(isBanned)return showCustomAlert('Access Denied!','This account has been banned.','error');mainScreen.classList.remove('visible'),document.getElementById('withdrawScreen').classList.add('visible'),loadUserData(),displayWithdrawals()}function hideWithdraw(){document.getElementById('withdrawScreen').classList.remove('visible'),mainScreen.classList.add('visible')}function displayWithdrawals(){const e=document.getElementById('withdrawalHistoryContainer');if(!withdrawalHistory||0===withdrawalHistory.length)return void(e.innerHTML='<div class="no-records">No withdrawal requests currently.</div>');let t='<table class="history-table">';t+='<thead><tr><th>Date</th><th>Amount (SHIB)</th><th>Status</th></tr></thead>',t+='<tbody>',withdrawalHistory.forEach(e=>{const s='pending'===e.status?'Pending':'Completed',a='pending'===e.status?'status-pending':'status-completed';t+=`\n                    <tr>\n                        <td>${e.date}</td>\n                        <td>${e.amount.toLocaleString()}</td>\n                        <td><span class="${a}">${s}</span></td>\n                    </tr>\n                `}),t+='</tbody></table>',e.innerHTML=t}async function confirmWithdraw(){if(isBanned)return showCustomAlert('Access Denied!','This account has been banned.','error');const e=document.getElementById('binanceId').value.trim(),t=parseInt(document.getElementById('withdrawAmount').value);if(!e||e.length<8)return showCustomAlert('Invalid Input!','Please enter a valid Binance User ID (minimum 8 digits).','warning');if(isNaN(t)||t<400)return showCustomAlert('Invalid Amount!','The minimum withdrawal amount is 400 SHIB.','warning');if(t>shibBalance)return showCustomAlert('Balance Error!',`Your balance is insufficient. Your current balance is ${shibBalance.toLocaleString()} SHIB.`,'error');const s=await requestActionId('withdraw');if(!s)return;const a=await fetchApi({type:'withdraw',binanceId:e,amount:t,action_id:s});a.ok&&(updateState({balance:a.data.new_balance}),await loadUserData(),displayWithdrawals(),showCustomAlert('Request Sent!',`Details:\nBinance ID: ${e}\nAmount: ${t.toLocaleString()} SHIB\n\nThe transfer will be processed within 24 hours.`,'success'))}function showAdminPanel(){if(!isAdmin)return showCustomAlert('Access Denied!','You are not authorized to view the Admin Panel.','error');mainScreen.classList.remove('visible'),document.getElementById('adminScreen').classList.add('visible'),loadAdminData()}function hideAdminPanel(){document.getElementById('adminScreen').classList.remove('visible'),mainScreen.classList.add('visible')}async function loadAdminData(){const e=await fetchApi({type:'getPendingWithdrawals'});if(e.ok){const t=e.data.pending_withdrawals;displayPendingWithdrawals(t)}else displayPendingWithdrawals([])}function displayPendingWithdrawals(e){const t=document.getElementById('pendingWithdrawalsList');if(!e||0===e.length)return void(t.innerHTML='<div class="no-records">No pending withdrawal requests.</div>');let s='';e.forEach(e=>{s+=`<div class="admin-list-item" data-request-id="${e.request_id}"><div class="user-info-admin"><h4>User ID: ${e.user_id}</h4><p>Amount: ${e.amount.toLocaleString()} SHIB | Binance ID: ${e.binance_id} | Date: ${new Date(e.created_at).toLocaleDateString('en-GB')}</p></div><div class="admin-actions"><button class="action-btn accept-btn" onclick="handleAdminAction('${e.request_id}','accept')">Accept</button><button class="action-btn reject-btn" onclick="handleAdminAction('${e.request_id}','reject')">Reject</button><button class="action-btn ban-btn" onclick="handleAdminAction('${e.request_id}','ban','${e.user_id}')">Ban</button></div></div>`}),t.innerHTML=s}async function handleAdminAction(e,t,s=null){const a=await requestActionId('adminAction');if(!a)return;const n=await fetchApi({type:'adminAction',request_id:e,action:t,user_to_ban:s,action_id:a});n.ok?(loadAdminData(),showCustomAlert('Success!','Action completed successfully.','success')):showCustomAlert('Error!',n.error,'error')}document.addEventListener('click',function e(){playBGAudio(),document.removeEventListener('click',e)})</script></body></html>